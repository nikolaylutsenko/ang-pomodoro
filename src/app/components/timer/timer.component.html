<div class="timer-container card">
  <div class="mode-selector">
    <button 
      class="mode-btn" 
      [class.active]="currentMode === TimerMode.WORK"
      (click)="setTimeForMode(TimerMode.WORK)" 
      [disabled]="isRunning"
    >
      Work
    </button>
    <button 
      class="mode-btn" 
      [class.active]="currentMode === TimerMode.SHORT_BREAK"
      (click)="setTimeForMode(TimerMode.SHORT_BREAK)" 
      [disabled]="isRunning"
    >
      Short Break
    </button>
    <button 
      class="mode-btn" 
      [class.active]="currentMode === TimerMode.LONG_BREAK"
      (click)="setTimeForMode(TimerMode.LONG_BREAK)" 
      [disabled]="isRunning"
    >
      Long Break
    </button>
  </div>

  <div class="timer-display">
    <span class="time">{{ formatTime(minutes) }}:{{ formatTime(seconds) }}</span>
  </div>

  <!-- Task input area -->
  <div class="task-input">
    <select
      [(ngModel)]="selectedTaskId"
      (ngModelChange)="onTaskChange($event)"
      [disabled]="tasks.length === 0"
    >
      <option value="">-- Select Task --</option>
      <option *ngFor="let task of tasks" [value]="task.id">
        {{ task.description.length > 200 ? (task.description | slice:0:200) + '...' : task.description }}
      </option>
    </select>
  </div>

  <div class="timer-controls">
    <button class="btn start-btn" (click)="startTimer()" [disabled]="isRunning">
      <i class="fas fa-play"></i>
    </button>
    <button class="btn stop-btn" (click)="stopTimer()" [disabled]="!isRunning">
      <i class="fas fa-square"></i>
    </button>
    <button class="btn reset-btn" (click)="resetTimer()" [disabled]="isRunning">
      <i class="fas fa-redo-alt"></i>
    </button>
  </div>
</div>

<!-- Add the timer history component below the timer -->
<app-timer-history></app-timer-history>
